Привет! Я помогу вам составить план перевода системы на мультиязычный вариант (русский и туркменский). Сначала давайте изучим структуру проекта, чтобы понять, что нужно переводить.


[6 tools called]

Теперь у меня есть полное понимание структуры проекта. Давайте создам план перевода системы на мультиязычный вариант (русский и туркменский).

## План перевода системы на мультиязычный вариант (русский и туркменский)

### 1. **Анализ текущего состояния**

**Что уже есть:**
- Django проект с базовой настройкой i18n (LANGUAGE_CODE = 'en-us', USE_I18N = True)
- Все тексты в системе уже на русском языке
- Используется Django 5.1.7
- Приложения: accounts, subscribers, logs, two_factor

**Что нужно перевести:**
- Все шаблоны (templates/)
- Формы (forms.py)
- Модели (models.py) 
- Сообщения и уведомления
- JavaScript строки
- Админ-панель

### 2. **Настройка Django для мультиязычности**

#### 2.1. Обновление настроек (settings.py)
```python
# Добавить поддержку языков
LANGUAGES = [
    ('ru', 'Русский'),
    ('tk', 'Türkmen'),
]

LANGUAGE_CODE = 'ru'  # По умолчанию русский

# Добавить middleware для локализации
MIDDLEWARE = [
    # ... существующие middleware ...
    'django.middleware.locale.LocaleMiddleware',  # Добавить после SessionMiddleware
    # ... остальные middleware ...
]

# Настройки локализации
USE_I18N = True
USE_L10N = True
USE_TZ = True

# Пути к файлам переводов
LOCALE_PATHS = [
    BASE_DIR / 'locale',
]

# Настройки для форматирования дат и чисел
TIME_ZONE = 'Asia/Ashgabat'  # Туркменистан
```

#### 2.2. Создание структуры папок для переводов
```
locale/
├── ru/
│   └── LC_MESSAGES/
│       ├── django.po
│       └── django.mo
└── tk/
    └── LC_MESSAGES/
        ├── django.po
        └── django.mo
```

### 3. **Подготовка кода для перевода**

#### 3.1. Шаблоны (templates/)
- Обернуть все тексты в теги `{% trans %}` и `{% blocktrans %}`
- Добавить `{% load i18n %}` в начало каждого шаблона
- Обновить `lang` атрибут в base.html

#### 3.2. Формы (forms.py)
- Обернуть все labels, help_text, choices в `ugettext_lazy()`
- Импортировать: `from django.utils.translation import ugettext_lazy as _`

#### 3.3. Модели (models.py)
- Обернуть verbose_name и help_text в `ugettext_lazy()`
- Перевести choices в моделях

#### 3.4. Представления (views.py)
- Обернуть сообщения в `ugettext()`
- Использовать `gettext_lazy()` для констант

### 4. **Поэтапный план реализации**

#### **Этап 1: Настройка инфраструктуры (1-2 дня)**
1. Обновить `settings.py` с настройками i18n
2. Создать структуру папок `locale/`
3. Добавить `LocaleMiddleware` в MIDDLEWARE
4. Создать базовые файлы переводов

#### **Этап 2: Перевод шаблонов (2-3 дня)**
1. **base.html** - основной шаблон с навигацией
2. **accounts/** - шаблоны аутентификации и профиля
3. **subscribers/** - шаблоны для работы с абонентами
4. **logs/** - шаблоны для логов
5. **two_factor/** - шаблоны двухфакторной аутентификации

#### **Этап 3: Перевод форм (1-2 дня)**
1. **accounts/forms.py** - формы пользователей
2. **subscribers/forms.py** - формы импорта и поиска
3. **logs/forms.py** - формы фильтрации логов

#### **Этап 4: Перевод моделей (1 день)**
1. **accounts/models.py** - модель профиля пользователя
2. **subscribers/models.py** - модель абонента
3. **logs/models.py** - модель логов

#### **Этап 5: Перевод JavaScript (1 день)**
1. Обновить `static/js/main.js`
2. Перевести строки в шаблонах с JavaScript
3. Создать систему переключения языков

#### **Этап 6: Создание переводов (2-3 дня)**
1. Сгенерировать файлы `.po` командой `makemessages`
2. Перевести русские строки на туркменский
3. Скомпилировать переводы командой `compilemessages`

#### **Этап 7: Тестирование и доработка (1-2 дня)**
1. Тестирование переключения языков
2. Проверка корректности переводов
3. Исправление ошибок

### 5. **Детальный список файлов для перевода**

#### **Шаблоны (15 файлов):**
- `templates/base.html`
- `templates/accounts/login.html`
- `templates/accounts/profile.html`
- `templates/accounts/user_form.html`
- `templates/accounts/user_list.html`
- `templates/accounts/password_reset.html`
- `templates/subscribers/import_csv.html`
- `templates/subscribers/list.html`
- `templates/subscribers/subscriber_detail.html`
- `templates/logs/list.html`
- `templates/logs/detail.html`
- `templates/two_factor/core/login.html`
- `templates/two_factor/core/setup.html`
- `templates/two_factor/profile/profile.html`
- `templates/two_factor/profile/disable.html`

#### **Формы (3 файла):**
- `accounts/forms.py`
- `subscribers/forms.py`
- `logs/forms.py`

#### **Модели (3 файла):**
- `accounts/models.py`
- `subscribers/models.py`
- `logs/models.py`

#### **Представления (3 файла):**
- `accounts/views.py`
- `subscribers/views.py`
- `logs/views.py`

### 6. **Команды для реализации**

```bash
# 1. Создание файлов переводов
python manage.py makemessages -l ru
python manage.py makemessages -l tk

# 2. Компиляция переводов
python manage.py compilemessages

# 3. Создание миграций (если нужно)
python manage.py makemigrations
python manage.py migrate
```

### 7. **Дополнительные соображения**

#### **7.1. Переключение языков**
- Добавить переключатель языков в навигацию
- Использовать URL-параметр или сессию для выбора языка
- Сохранять выбор языка в профиле пользователя

#### **7.2. Туркменский язык**
- Использовать правильную кодировку UTF-8
- Учесть особенности туркменской грамматики
- Возможно потребуется консультация носителя языка

#### **7.3. Тестирование**
- Проверить работу всех форм на обоих языках
- Убедиться в корректности отображения дат и чисел
- Протестировать переключение языков

### 8. **Временные затраты**

**Общее время: 8-12 дней**
- Настройка инфраструктуры: 1-2 дня
- Перевод шаблонов: 2-3 дня  
- Перевод форм и моделей: 2-3 дня
- Создание переводов: 2-3 дня
- Тестирование: 1-2 дня

Этот план обеспечит полный перевод системы на русский и туркменский языки с сохранением всей функциональности.