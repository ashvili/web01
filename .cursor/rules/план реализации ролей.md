ё# План реализации системы ролей пользователей
1. Настройка моделей и групп пользователей
Создание групп в Django admin: Администратор, Пользователь1, Пользователь2
Добавление специального поля в модель пользователя для отслеживания роли
2. Настройка прав доступа
Создание пользовательских разрешений в Django
Назначение прав для каждой группы:
Администратор - все права
Пользователь1 - все кроме импорта и просмотра истории
Пользователь2 - все кроме импорта, истории и доступа к IMSI
3. Модификация моделей для ограничения доступа к полю IMSI
Создание мета-класса в модели абонента для управления видимостью полей
Реализация метода get_fields_for_user для фильтрации полей по роли
4. Модификация представлений (views)
Добавление декораторов permission_required для защиты импорта и просмотра истории
Реализация фильтрации полей в представлениях поиска и отображения абонентов
5. Настройка шаблонов
Условный рендеринг элементов интерфейса в зависимости от роли
Скрытие кнопок и ссылок на запрещенные функции
Скрытие поля IMSI для пользователей 2 уровня
6. Реализация middleware для фильтрации данных
Создание middleware для автоматической фильтрации данных IMSI
Перехват и модификация QuerySet для пользователей 2 уровня
7. Модификация API (если есть)
Добавление проверок прав доступа в сериализаторы
Фильтрация данных на уровне API
8. Настройка админ-панели
Ограничение доступа к секциям администрирования
Настройка прав для управления пользователями
9. Тестирование системы ролей
Написание тестов для проверки доступа каждой роли
Тесты для проверки скрытия IMSI для пользователей 2 уровня
10. Реализация интерфейса управления ролями
Форма для администраторов для назначения ролей
Страница управления пользователями и их ролями
Пример кода для реализации
